define ("block_readaloudteacher/readaloudhighcharts",["jquery","core/config","core/str"],function(a,b,c){"use strict";var d,f,g,h,i={},j=function(a){var b="";if(a.point.isDrillDown||a.point.isUserChart){b+="<div class=\"text-center mt-1\">"+a.point.label+"</div>"}else{b+="<div class=\"text-center mt-1\"><img src=\""+a.point.photoUrl+"\" class=\"userpicture defaultuserpic\" role=\"presentation\" width=\"50\" height=\"50\"></div><div class=\"text-center mt-1\">"+a.point.name+"</div><div class=\"text-center mt-1\">"+a.point.label+"</div>";b+="<div class=\"text-center mt-1\">"+i.clickformore+"</div>"}return b},k=function(c,e,k,l,m){var n={chart:{type:m===void 0?"column":m},title:{text:e[0].name,useHTML:!0},xAxis:{type:"category",labels:{rotation:90,style:{fontSize:"11px",fontFamily:"\"Open Sans\",-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\"",width:"200px",whiteSpace:"nowrap",color:"#898989"}}},yAxis:{min:0,title:{text:k},plotLines:[]},legend:{floating:!0,layout:"vertical",align:"left",verticalAlign:"top",x:60,y:0},tooltip:{useHTML:!0,backgroundColor:"#f5f5f5",borderColor:"#8c8c8c",borderRadius:10,borderWidth:2,formatter:function formatter(){return j(this)}},series:e,plotOptions:{series:{cursor:"pointer",states:{hover:{enabled:!1}}},showInLegend:0}};if("readingscompleted"===m){n.plotOptions.series.point={events:{click:function click(a){location.href=b.wwwroot+"/blocks/readaloudteacher/klasses/userreports.php?userid="+a.point.xid+"&courseid="+f+"&returnklassid="+g+"&returnklasstype="+h}}}}else if(l!==void 0&&l){n.drilldown={series:l,type:"line"};n.chart.events={drilldown:function drilldown(a){var b="<img src=\""+a.point.photoUrl+"\" class=\"userpicture defaultuserpic\" role=\"presentation\" width=\"50\" height=\"50\">";this.setTitle({text:b+a.point.name})},drillup:function drillup(a){this.setTitle({text:a.seriesOptions.name})}}}if("wpm"===m){var o=a("#pagedata").attr("data-wpmbenchmarks");if(o!==void 0){o=JSON.parse(o);var p="<b>"+i.benchmarks+"</b>: ";o.forEach(function(a){if("0"!==a.value){n.yAxis.plotLines.push({color:"lightblue",value:a.value,dashStyle:"dash",width:"2",zIndex:5,label:{text:a.name,align:"right",x:-5}});p+=a.name+" "+a.value+" "+i.wpm+" | "}});n.subtitle={text:p}}}if("quiz"===m||"accuracy"===m){n.yAxis.max=100}d.chart(c,n)},l=function(b){var c=[],d=a(".highcharts-data").not(".drilldown-dataseries").map(function(b,c){c=a(c);return c!==void 0&&c.attr("data-highcharts-data")!==void 0?{id:c.attr("id"),chartclass:c.attr("data-chart-class"),seriestype:c.attr("data-series-type"),json:JSON.parse(c.attr("data-highcharts-data"))}:{}});d.each(function(a,d){if("readingscompleted"===d.chartclass||b){c[d.chartclass]=d}else{c[d.chartclass+"-"+d.seriestype]=d}});return c},m=function(){var b=[],c=a(".drilldown-dataseries").map(function(b,c){c=a(c);return c!==void 0&&c.attr("data-highcharts-data")!==void 0?{id:c.attr("id"),chartclass:c.attr("data-chart-class"),data:JSON.parse(c.attr("data-highcharts-data"))}:{}});c.each(function(a,c){if("readingscompleted"!==c.chartclass){if(b[c.chartclass]===void 0){b[c.chartclass]=[]}b[c.chartclass].push({id:c.id,type:c.data.type,name:c.data.name,data:c.data.data,fillColor:c.data.fillColor})}});return b};return{init:function init(e,j,n){require.config({packages:[{name:"highcharts",main:"highcharts"}],paths:{highcharts:b.wwwroot+"/blocks/readaloudteacher/plugins/highcharts/code"}});f=e;g=j.id;h=j.type;require(["highcharts","highcharts/modules/exporting","highcharts/modules/accessibility","highcharts/modules/drilldown"],function(b,e,f,g){d=b;a(document).ready(function(){e(b);f(b);g(b);c.get_strings([{key:"clickformore",component:"block_readaloudteacher"},{key:"percent",component:"block_readaloudteacher"},{key:"colwpm",component:"block_readaloudteacher"},{key:"readingscompleted",component:"block_readaloudteacher"},{key:"benchmarks",component:"block_readaloudteacher"}]).done(function(a){i.clickformore=a[0];i.percent=a[1];i.wpm=a[2];i.readingscompleted=a[3];i.benchmarks=a[4];var b=l(n);if(!n){var c=m();k("highchart-readings-completed",[b.readingscompleted.json],i.readingscompleted,[],"readingscompleted");k("highchart-wpm",[b["wordsperminute-average"].json,b["wordsperminute-latest"].json],i.wpm,c.wordsperminute,"wpm");k("highchart-accuracy",[b["accuracy-average"].json,b["accuracy-latest"].json],i.percent,c.accuracy,"accuracy");k("highchart-quiz",[b["quiz-average"].json,b["quiz-latest"].json],i.percent,c.quiz,"quiz")}else{k("highchart-wpm",[b.wordsperminute.json],i.wpm,[],"wpm");k("highchart-quiz",[b.quiz.json],i.percent,[],"quiz");k("highchart-accuracy",[b.accuracy.json],i.percent,[],"accuracy")}})})})}}});
//# sourceMappingURL=readaloudhighcharts.min.js.map
